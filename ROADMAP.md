# Roadmap

Цели развития проекта (Ariadne + FastAPI):

Короткая перспектива (1–2 недели)
- Добавить JWT-авторизацию: логин, middleware, роль/доступ.
- Перейти с InMemory на БД: SQLite → PostgreSQL, слой DAO/репозитория.
- Валидация входных данных: pydantic-модели на уровне резолверов.
- Пагинация и фильтры для `users`/`posts`, единый формат ошибок.
- Тесты: `pytest` (unit/интеграция), фикстуры для БД.
- CI: GitHub Actions (Python 3.13), установка deps, запуск тестов.
- Качество кода: `pre-commit`, `ruff`, `black`, статический анализ `mypy`.
- CORS/заголовки: настроить источники, безопасность, размер запроса.
- DataLoader: батчинг и кеширование, убрать N+1 на связях user→posts.
- Ограничение сложности GraphQL: depth/complexity лимиты, safelist операций.
- Persisted queries: хранение и проверка допустимых операций.

Средняя перспектива (3–6 недель)
- Подписки (Subscriptions) через WebSocket: новые посты/события.
- Документация схемы: автогенерация описаний, примеры запросов.
- Контейнеризация: `Dockerfile`, compose для БД и сервера.
- Наблюдаемость: структурированный логгер, метрики `/metrics` (Prometheus), трассировка.
- Кэширование: Redis для популярных запросов и rate-limit (если нужно).
- Миграции БД: Alembic, стратегия версионирования схемы.
- Ошибки: Sentry/Ошибки в проде, корреляция `request_id` в логах.
- Безопасность: rate limiting, защита Playground в продакшне.
- Инструменты разработчика: seed-скрипты данных, фикстуры, локальный compose.
- Файлы: GraphQL Upload (если появится необходимость загрузок).
- Архитектура схемы: готовность к federation/stitching при росте сервисов.

Дальняя перспектива (6+ недель)
- RBAC/ABAC: роли, права на мутации, проверка в резолверах.
- Многоарендность (multi-tenant) и шардирование, если объемы растут.
- Производительность: профилирование, оптимизация N+1, батчинг резолверов.
- API-стабильность: семантические версии, депрекация полей/типов.
- Интеграции: внешние сервисы, вебхуки, очереди (RabbitMQ/Kafka).
- Масштабирование: multi-region, read-replicas, blue/green деплой.
- SLO/SLA: цели по отказоустойчивости, бюджет ошибок, алерты.
- Persisted queries CDN/edge-кэширование для публичных клиентов.

Технические заметки
- Ariadne: использовать SDL+резолверы, развести схему и бизнес-логику.
- Слои: `schema` (SDL/резолверы) → `services` → `repos` → `db`.
- Ошибки: единый формат GraphQL ошибок, маппинг исключений.
- Безопасность: CORS, headers, ограничение размера запросов, защита Playground.
- Конфигурация: `pydantic-settings`/env, единая схема конфигов.
- DataLoader/батчинг: выносить в слой сервисов, кеш по запросу.
- Версионирование: политика де-прекации и миграции схемы, чёткие правила именования.